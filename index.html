<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Norr√∂na Onboard Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>:root{--smyril-blue:#002B5C;--smyril-accent:#00A9E0;--background-dark:#001f44;--background-light:#f4f7f9;--surface-white:#ffffff;--text-dark:#212529;--text-light:#ffffff;--text-muted:#6c757d;--shadow:0 8px 30px rgba(0,43,92,.1);--border-radius:16px}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Poppins',sans-serif;background-color:var(--background-dark);color:var(--text-dark);line-height:1.7}body.mobile-nav-active{overflow:hidden}#app-shell{max-width:500px;margin:1rem auto;background-color:var(--background-light);border-radius:var(--border-radius);box-shadow:0 10px 40px rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);overflow:hidden;min-height:calc(100vh - 2rem)}@media (max-width:520px){#app-shell{margin:0;border-radius:0;border:none;min-height:100vh}}.main-header{position:sticky;top:0;z-index:1000;background-color:rgba(0,43,92,.85);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.container{max-width:1200px;margin:0 auto;padding:0 20px}.navbar{display:flex;justify-content:space-between;align-items:center;height:70px}.navbar .logo img{height:28px}.nav-links{display:flex;list-style:none;gap:20px;overflow-x:auto;padding-bottom:5px}.nav-links a{color:var(--text-light);text-decoration:none;font-weight:600;padding:10px 5px;position:relative;transition:color .3s ease;white-space:nowrap}.nav-links a.active{color:var(--smyril-accent)}.hamburger-menu{display:none;background:none;border:none;cursor:pointer;padding:10px}.hamburger-menu .material-icons{color:var(--text-light);font-size:36px}.mobile-nav{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,43,92,.98);z-index:1100;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-100%);transition:transform .4s ease-in-out}.mobile-nav.active{transform:translateY(0)}.mobile-nav .close-btn{position:absolute;top:20px;right:20px;background:none;border:none;cursor:pointer}.mobile-nav .close-btn .material-icons{color:var(--text-light);font-size:40px}.mobile-nav ul{list-style:none;text-align:center}.mobile-nav ul li{margin:20px 0}.mobile-nav ul a{color:var(--text-light);text-decoration:none;font-size:2rem;font-weight:600;padding:10px}.mobile-nav ul a.active{color:var(--smyril-accent)}main{padding:30px}.section-header{margin-bottom:20px;text-align:center}.section-header h2{font-size:2.2rem;color:var(--smyril-blue);font-weight:700}.content-grid{display:grid;gap:20px}.item-card{background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);overflow:hidden}.item-info{padding:25px}.item-info h3{font-size:1.5rem;color:var(--smyril-blue)}.item-info p{color:var(--text-muted);margin:10px 0}.item-info .fields{border-top:1px solid #eee;margin-top:15px;padding-top:15px;display:grid;gap:8px;font-size:.9rem}.item-info .field{display:flex;justify-content:space-between}.item-info .field strong{color:var(--text-dark)}.menu{border-top:1px solid #eee;margin-top:15px;padding-top:15px}.menu h4{font-weight:700;color:var(--smyril-blue);margin-bottom:10px}.menu-item{margin-bottom:10px}.menu-item-header{display:flex;justify-content:space-between;font-weight:600}.menu-item-desc{font-size:.9rem;color:var(--text-muted)}.slideshow{position:relative;width:100%;height:220px;overflow:hidden}.slide{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .5s ease-in-out}.slide.active{opacity:1}.slide img{width:100%;height:100%;object-fit:cover}.slideshow-nav{position:absolute;top:50%;width:100%;display:flex;justify-content:space-between;transform:translateY(-50%)}.slideshow-nav button{background-color:rgba(0,43,92,.5);color:#fff;border:none;cursor:pointer;padding:10px;margin:0 10px;border-radius:50%}.slideshow-dots{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:5px}.slideshow-dots .dot{width:8px;height:8px;border-radius:50%;background-color:rgba(255,255,255,.5);transition:background-color .3s}.slideshow-dots .dot.active{background-color:#fff}@media (max-width:768px){.nav-links{display:none}.hamburger-menu{display:block}}</style>
</head>
<body>
    <div id="app-shell">
        <header class="main-header">
            <nav class="container navbar">
                <a href="#" class="logo"><img id="header-logo" src="" alt="Logo"></a>
                <div class="nav-links" id="nav-links"></div>
                <button class="hamburger-menu" id="hamburger-menu"><span class="material-icons">menu</span></button>
            </nav>
        </header>
        <div class="mobile-nav" id="mobile-nav">
            <button class="close-btn" id="close-btn"><span class="material-icons">close</span></button>
            <ul id="mobile-nav-links"></ul>
        </div>
        <main id="content-container"><p class="text-center text-muted">Loading...</p></main>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const contentContainer = document.getElementById("content-container");
            let appData = {};

            function createSlideshow(images) { if (!images || images.length === 0) return '<div style="height:220px; background:#eee;"></div>'; if (images.length === 1) return `<div class="slide active"><img src="${images[0]}" loading="lazy"></div>`; const slides = images.map((img, i) => `<div class="slide ${i === 0 ? 'active' : ''}" data-index="${i}"><img src="${img}"></div>`).join(''); const dots = images.map((_, i) => `<div class="dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`).join(''); return `<div class="slideshow" data-total="${images.length}">${slides}<div class="slideshow-nav"><button class="prev"><span class="material-icons">arrow_back_ios</span></button><button class="next"><span class="material-icons">arrow_forward_ios</span></button></div><div class="slideshow-dots">${dots}</div></div>`; }
            function createMenu(menuItems) { if (!menuItems || menuItems.length === 0) return ''; return `<div class="menu"><h4>Menu</h4>${menuItems.map(item => `<div class="menu-item"><div class="menu-item-header"><span>${item.name}</span><span>${item.price}</span></div>${item.description ? `<div class="menu-item-desc">${item.description}</div>` : ''}</div>`).join('')}</div>`; }
            function initializeSlideshows() { document.querySelectorAll('.slideshow').forEach(slideshow => { let currentIndex = 0; const slides = slideshow.querySelectorAll('.slide'); const dots = slideshow.querySelectorAll('.dot'); const total = parseInt(slideshow.dataset.total, 10); function showSlide(index) { slides.forEach(s => s.classList.remove('active')); dots.forEach(d => d.classList.remove('active')); slides[index].classList.add('active'); dots[index].classList.add('active'); currentIndex = index; } slideshow.querySelector('.next').addEventListener('click', () => { showSlide((currentIndex + 1) % total); }); slideshow.querySelector('.prev').addEventListener('click', () => { showSlide((currentIndex - 1 + total) % total); }); }); }

            function renderPage(categoryId) {
                const category = appData.categories.find(cat => cat.id === categoryId); if (!category) { contentContainer.innerHTML = '<p>Content not found.</p>'; return; }
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                document.querySelectorAll(`.nav-link[data-id="${categoryId}"]`).forEach(link => link.classList.add('active'));
                contentContainer.innerHTML = `<div class="section-header"><h2>${category.title}</h2></div><div class="content-grid">${category.items.map(item => `<div class="item-card">${createSlideshow(item.images)}<div class="item-info"><h3>${item.name}</h3>${item.description ? `<p>${item.description}</p>` : ''}<div class="fields">${item.fields.map(field => `<div class="field"><strong>${field.label}:</strong><span>${field.value}</span></div>`).join('')}</div>${createMenu(item.menu)}</div></div>`).join('')}</div>`;
                initializeSlideshows(); window.location.hash = categoryId;
            }

            async function init() {
                try {
                    const response = await fetch("data.json?v=" + Date.now()); if (!response.ok) throw new Error("Could not load data."); appData = await response.json();
                    document.getElementById("header-logo").src = appData.settings.logoUrl;
                    const navHtml = appData.categories.map(cat => `<a href="#${cat.id}" class="nav-link" data-id="${cat.id}">${cat.title}</a>`).join(''); document.getElementById("nav-links").innerHTML = navHtml;
                    const mobileNavHtml = appData.categories.map(cat => `<li><a href="#${cat.id}" class="nav-link" data-id="${cat.id}">${cat.title}</a></li>`).join(''); document.getElementById("mobile-nav-links").innerHTML = mobileNavHtml;
                    document.querySelectorAll('.nav-link').forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); renderPage(e.target.dataset.id); closeMobileMenu(); }); });
                    const initialCategoryId = window.location.hash.substring(1) || appData.categories[0]?.id;
                    if (initialCategoryId) renderPage(initialCategoryId); else contentContainer.innerHTML = '<p>Welcome!</p>';
                } catch (error) { console.error(error); contentContainer.innerHTML = `<p>${error.message}</p>`; }
            }
            const mobileNav = document.getElementById("mobile-nav"); function openMobileMenu() { mobileNav.classList.add("active"); document.body.classList.add("mobile-nav-active"); } function closeMobileMenu() { mobileNav.classList.remove("active"); document.body.classList.remove("mobile-nav-active"); }
            document.getElementById("hamburger-menu").addEventListener("click", openMobileMenu); document.getElementById("close-btn").addEventListener("click", closeMobileMenu);
            init();
        });
    </script>
</body>
</html>
