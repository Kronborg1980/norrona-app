<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Norr√∂na Onboard Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>:root{--smyril-blue:#002B5C;--smyril-accent:#00A9E0;--background-dark:#001f44;--background-light:#f4f7f9;--surface-white:#ffffff;--text-dark:#212529;--text-light:#ffffff;--text-muted:#6c757d;--shadow:0 8px 30px rgba(0,43,92,.1);--border-radius:16px}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Poppins',sans-serif;background-color:var(--background-dark);color:var(--text-dark);line-height:1.7}body.mobile-nav-active{overflow:hidden}#app-shell{max-width:500px;margin:1rem auto;background-color:var(--background-light);border-radius:var(--border-radius);box-shadow:0 10px 40px rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);overflow:hidden;min-height:calc(100vh - 2rem)}@media (max-width:520px){#app-shell{margin:0;border-radius:0;border:none;min-height:100vh}}.main-header{position:sticky;top:0;z-index:1000;background-color:rgba(0,43,92,.85);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.container{max-width:1200px;margin:0 auto;padding:0 20px}.navbar{display:flex;justify-content:space-between;align-items:center;height:70px}.navbar .logo img{height:28px}.nav-links{display:flex;list-style:none;gap:20px;overflow-x:auto;padding-bottom:5px}.nav-links a{color:var(--text-light);text-decoration:none;font-weight:600;padding:10px 5px;position:relative;transition:color .3s ease;white-space:nowrap}.nav-links a.active{color:var(--smyril-accent)}.hamburger-menu{display:none;background:none;border:none;cursor:pointer;padding:10px}.hamburger-menu .material-icons{color:var(--text-light);font-size:36px}.mobile-nav{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,43,92,.98);z-index:1100;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-100%);transition:transform .4s ease-in-out}.mobile-nav.active{transform:translateY(0)}.mobile-nav .close-btn{position:absolute;top:20px;right:20px;background:none;border:none;cursor:pointer}.mobile-nav .close-btn .material-icons{color:var(--text-light);font-size:40px}.mobile-nav ul{list-style:none;text-align:center}.mobile-nav ul li{margin:20px 0}.mobile-nav ul a{color:var(--text-light);text-decoration:none;font-size:2rem;font-weight:600;padding:10px}.mobile-nav ul a.active{color:var(--smyril-accent)}main{padding:30px}.section-header{margin-bottom:20px;text-align:center}.section-header h2{font-size:2.2rem;color:var(--smyril-blue);font-weight:700}.content-grid{display:grid;gap:20px}.item-card{background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);overflow:hidden}.item-card img{width:100%;height:200px;object-fit:cover;display:block}.item-info{padding:25px}.item-info h3{font-size:1.5rem;color:var(--smyril-blue)}.item-info p{color:var(--text-muted);margin:10px 0}.item-info .fields{border-top:1px solid #eee;margin-top:15px;padding-top:15px;display:grid;gap:8px;font-size:.9rem}.item-info .field{display:flex;justify-content:space-between}.item-info .field strong{color:var(--text-dark)}@media (max-width:768px){.nav-links{display:none}.hamburger-menu{display:block}}</style>
</head>
<body>
    <div id="app-shell">
        <header class="main-header">
            <nav class="container navbar">
                <a href="#" class="logo"><img id="header-logo" src="" alt="Logo"></a>
                <div class="nav-links" id="nav-links"></div>
                <button class="hamburger-menu" id="hamburger-menu"><span class="material-icons">menu</span></button>
            </nav>
        </header>
        <div class="mobile-nav" id="mobile-nav">
            <button class="close-btn" id="close-btn"><span class="material-icons">close</span></button>
            <ul id="mobile-nav-links"></ul>
        </div>
        <main id="content-container"><p class="text-center text-muted">Loading...</p></main>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const navLinksContainer = document.getElementById("nav-links");
            const mobileNavLinksContainer = document.getElementById("mobile-nav-links");
            const contentContainer = document.getElementById("content-container");
            const headerLogo = document.getElementById("header-logo");
            let appData = {};

            function renderPage(categoryId) {
                const category = appData.categories.find(cat => cat.id === categoryId);
                if (!category) {
                    contentContainer.innerHTML = '<p class="text-center text-red-500">Content not found.</p>';
                    return;
                }

                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                document.querySelectorAll(`.nav-link[data-id="${categoryId}"]`).forEach(link => link.classList.add('active'));

                contentContainer.innerHTML = `
                    <div class="section-header"><h2>${category.title}</h2></div>
                    <div class="content-grid">${category.items.map(item => `
                        <div class="item-card">
                            ${item.image ? `<img src="${item.image}" alt="${item.name}" loading="lazy">` : ''}
                            <div class="item-info">
                                <h3>${item.name}</h3>
                                ${item.description ? `<p>${item.description}</p>` : ''}
                                <div class="fields">
                                    ${item.fields.map(field => `
                                        <div class="field">
                                            <strong>${field.label}:</strong>
                                            <span>${field.value}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>`).join('')}
                    </div>`;
                window.location.hash = categoryId;
            }

            async function init() {
                try {
                    const response = await fetch("data.json?v=" + Date.now());
                    if (!response.ok) throw new Error("Could not load data.");
                    appData = await response.json();

                    headerLogo.src = appData.settings.logoUrl;
                    
                    const navHtml = appData.categories.map(cat => 
                        `<a href="#${cat.id}" class="nav-link" data-id="${cat.id}">${cat.title}</a>`
                    ).join('');
                    navLinksContainer.innerHTML = navHtml;

                    const mobileNavHtml = appData.categories.map(cat => 
                        `<li><a href="#${cat.id}" class="nav-link" data-id="${cat.id}">${cat.title}</a></li>`
                    ).join('');
                    mobileNavLinksContainer.innerHTML = mobileNavHtml;

                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const categoryId = e.target.dataset.id;
                            renderPage(categoryId);
                            closeMobileMenu();
                        });
                    });

                    const initialCategoryId = window.location.hash.substring(1) || appData.categories[0]?.id;
                    if (initialCategoryId) {
                        renderPage(initialCategoryId);
                    } else {
                        contentContainer.innerHTML = '<p class="text-center">Welcome! Select a category to begin.</p>';
                    }

                } catch (error) {
                    console.error(error);
                    contentContainer.innerHTML = `<p class="text-center text-red-500">${error.message}</p>`;
                }
            }

            const mobileNav = document.getElementById("mobile-nav");
            function openMobileMenu() { mobileNav.classList.add("active"); document.body.classList.add("mobile-nav-active"); }
            function closeMobileMenu() { mobileNav.classList.remove("active"); document.body.classList.remove("mobile-nav-active"); }
            document.getElementById("hamburger-menu").addEventListener("click", openMobileMenu);
            document.getElementById("close-btn").addEventListener("click", closeMobileMenu);
            
            init();
        });
    </script>
</body>
</html>
